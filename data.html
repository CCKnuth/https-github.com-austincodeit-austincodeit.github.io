<!DOCTYPE html>
<!--
* DATE: 09/26/2016
* INFO: This page was developed by Nathan Brigmon using Bootstrap CSS styles. It's built on the work of John Clary the previous GIS Analyst at the Austin Code Department.
* CONT: To contact the developer of the page, email nathan.brigmon@austintexas.gov
-->
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Austin Code's GitHub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css" />

  </head>
  <body>

      <div class="container">
          <input type="text" placeholder="address" />
          <br />
          Results below:
          <div id="results1"> </div>
          <div id="results2"> </div>
          <div id="results3"> </div>
          <div id="results4"> </div>
          <div id="results5"> </div>
      </div>
  </body>
</html>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js" type="text/javascript"></script>
<script>

    $(document).ready(function() {
        /*
            PROCESS FOR APPLICATION function
            1. CREATE DROPDOWN
            2. ON DROPDOWN SELECTION, SORT OPENDATA OBJECT BY NAME...
                2A. CREATE ARRAY OF OBJECTS
                2B. INCLUDE ADDRESS, PRIORITIES, DUE TO START, FOLDER NUMBER
            3. SEND ARRAY TO GEOCODER USIGN MAP FUNCTION
                3A. SELECT KEY AT RANDOM TO THROTTLE REQUEST
                3B. CREATE 0.1 SECOND DELAY
                3C. RETURN RESULTS with ERROR MSG STATIG HOW MANY WERE NOT CODED
            4. SEND RESULTS TO MAP
            5. CONFIGURE POPUPS
            6. CREATE ADD TO QUEUE BUTTON
            7. ENABLE RESET TO CLEAR MAP
            8. CREATE VISUAL DISPLAY OF WHOSE TASK LIST IS BEING VISUALIZED

        */

        let key1 = 'AIzaSyBXAnW9slEyfpkJKdHxnz_29kF8pn14MA0';
        let key2 = 'AIzaSyALPWxESCeijSKpKHoduW0htKA6w0KIJnc';
        let key3 = 'AIzaSyBbnhwYIXT-MBTVIaDxS9kzbqIOmoeqcRU';
        let key4 = 'AIzaSyCRQEeXDjgRjRX7HVyGFLDQXCzlrty1NxI';
        let key5 = 'AIzaSyDgR0LEtKMow--eiBeyiCbypLhDMAKCE8E';
        let key6 = 'AIzaSyC6ag7eWl7tjpaLo94L3w2LYZO41vklZC8';

        let list = [
            {add: '1200 w 40th st', key: key1}
            // {add: '1300 w 40th st', key: key2},
            // {add: '1400 w 40th st', key: key3},
            // {add: '1500 w 40th st', key: key4},
            // {add: '1600 w 40th st', key: key5},
        ];
        let count = 1;
        list.map(function(elem, idx){
            //construct link
            let link = 'https://maps.googleapis.com/maps/api/geocode/json?address='+elem['add']+'+Austin,+TX'+'&key='+elem['key'];
            console.log("LOOP: ", elem," ", idx);
            $.ajax({
              url: link,
              type: "GET"
            }).done(function(data) {
              //when the results are returned...
              //get inspector names by unique values

              $("#results"+count+"").html(JSON.stringify(data));
              count++;
              console.log('done: ',count,data);
            });
        });


    });

</script>
